{% extends 'base.html' %}
{% load static %}


{% block style %}

{% endblock style %}


{% block content %}
  <h1>Index</h1>
  {% if request.user.is_authenticated %}
    <h3>{{ user }}님</h3>
    <a href="{% url 'accounts:profile' user.username %}">프로필</a>
    <form action="{% url 'accounts:logout' %}" method='POST'>
      {% csrf_token %}
      <input class="btn btn-outline-secondary text-center" type='submit' value='Logout'>
    </form>
    <form action="{% url 'accounts:delete' %}" method='POST'>
      {% csrf_token %}
      <button type="submit" class="btn btn-outline-secondary a" role="button">회원탈퇴</button>
    </form>
    <a href="{% url 'accounts:update' %}">회원정보수정</a>
  {% else %}
    <a href="{% url 'accounts:login' %}">Login</a>
    <a href="{% url 'accounts:signup' %}">Signup</a>
  {% endif %}

  <h1>POST</h1>
  <a href="{% url 'posts:create' %}">[CREATE]</a>

  {% for post in posts %}
    <p>작성자: 
      <a href="{% url 'accounts:profile' post.user.username %}">{{ post.user }}</a>
    </p>
    <p>제목: 
      <a href="{% url 'posts:detail' post.pk %}">{{ post.title }}</a>
    </p>
    <p>내용: {{ post.content }}</p>
    <form action="{% url 'posts:likes' post.pk %}" method="POST">
      {% csrf_token %}
      {% if request.user in post.like_users.all %}
        <input type="submit" value="좋아요 취소">
      {% else %}
        <input type="submit" value="좋아요">
      {% endif %}
    </form>
    <hr>
  {% endfor %}
{% endblock content %}